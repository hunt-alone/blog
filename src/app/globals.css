@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --brand: 249 115 22; /* theme('colors.orange.600') */
  --text-1: 30 41 59; /* theme('colors.slate.800') */
  --text-2: 51 65 86; /* theme('colors.slate.700') */
  --text-3: 71 85 105; /* theme('colors.slate.600') */
  --text-4: 100 116 139; /* theme('colors.slate.500') */
  --surface: 255 255 255; /* theme('colors.white') */
  --surface-1: 248 250 252; /* theme('colors.slate.50') */
  --surface-2: 241 245 249; /* theme('colors.slate.100') */
  --surface-3: 226 232 240; /* theme('colors.slate.200') */
  --surface-4: 203 213 225; /* theme('colors.slate.300') */

  --border: 229 231 235;

  --font-remote: var(--font-remote-sans);

  --back-color-1: hsl(0, 70%, 9.090909090909092%);
  --back-color-2: hsl(0, 70%, 18.181818181818183%);
  --back-color-3: hsl(0, 70%, 27.272727272727273%);
  --back-color-4: hsl(0, 70%, 36.36363636363637%);
  --back-color-5: hsl(0, 70%, 45.45454545454546%);
  --back-color-6: hsl(0, 70%, 54.54545454545455%);
  --back-color-7: hsl(0, 70%, 63.63636363636364%);
  --back-color-8: hsl(0, 70%, 72.72727272727273%);
  --back-color-9: hsl(0, 70%, 81.81818181818183%);
  --back-color-10: hsl(0, 70%, 90.90909090909092%);
}
/*hsl(0, 70%, 9.090909090909092%)*/
/*hsl(0, 70%, 18.181818181818183%)*/
/*hsl(0, 70%, 27.272727272727273%)*/
/*hsl(0, 70%, 36.36363636363637%)*/
/*hsl(0, 70%, 45.45454545454546%)*/
/*hsl(0, 70%, 54.54545454545455%)*/
/*hsl(0, 70%, 63.63636363636364%)*/
/*hsl(0, 70%, 72.72727272727273%)*/
/*hsl(0, 70%, 81.81818181818183%)*/
/*hsl(0, 70%, 90.90909090909092%)*/

:root.dark {
  --brand: 226 232 240; /* theme('colors.slate.200') */
  --text-1: 248 250 252; /* theme('colors.slate.50') */
  --text-2: 241 245 249; /* theme('colors.slate.100') */
  --text-3: 226 232 240; /* theme('colors.slate.200') */
  --text-4: 203 213 225; /* theme('colors.slate.300') */
  --surface: 0 2 18; /* #000212 */
  --surface-1: 30 41 59; /* theme('colors.slate.800') */
  --surface-2: 51 65 85; /* theme('colors.slate.700') */
  --surface-3: 71 85 105; /* theme('colors.slate.600') */
  --surface-4: 100 116 139; /* theme('colors.slate.500') */

  --border: 51 65 85; /* theme('colors.slate.700') */
}

.prose {
  max-width: unset;
  color: rgb(var(--text-2));
}

.article-content {
  position: relative;
  padding: 3.5rem 3.25rem;
  border-radius: 28px;
  background: linear-gradient(
    360deg,
    rgba(255, 255, 255, 0.9) 0%,
    rgba(255, 255, 255, 0.7) 100%
  );
  box-shadow: 0 24px 48px -24px rgba(15, 23, 42, 0.18);
  /* border: 1px solid rgba(226, 232, 240, 0.7); */
  backdrop-filter: blur(6px);
}

:root.dark .article-content {
  background: linear-gradient(
    360deg,
    rgba(15, 23, 42, 0.9) 0%,
    rgba(15, 23, 42, 0.75) 100%
  );
  border-color: rgba(148, 163, 184, 0.3);
  box-shadow: 0 22px 48px -24px rgba(15, 23, 42, 0.6);
}

.article-content::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 28px;
  background-image: linear-gradient(
      90deg,
      rgba(249, 115, 22, 0.08) 1px,
      transparent 1px
    ),
    linear-gradient(0deg, rgba(249, 115, 22, 0.08) 1px, transparent 1px);
  background-size:
    32px 32px,
    32px 32px;
  mask-image: linear-gradient(180deg, rgba(0, 0, 0, 0.85), transparent 95%);
  pointer-events: none;
  opacity: 0.7;
}

.article-content > * {
  position: relative;
  z-index: 1;
}

.article-content .post-navigator {
  margin-top: 3rem;
}

/* Markdown */

.prose {
  > div > pre,
  > p:has(img) {
    /* @apply -mx-4 md:-mx-8; */
  }
}

.prose :where(p):not(:where([class~='not-prose'] *)) {
  @apply my-6 text-[1.05rem] leading-8 text-slate-700 first:mt-0 last:mb-0 dark:text-slate-200;
}

.prose :where(li):not(:where([class~='not-prose'] *)) {
  @apply leading-7 text-slate-700 dark:text-slate-200;
}

.prose :where(ul, ol):not(:where([class~='not-prose'] *)) {
  @apply my-5 pl-6;
}

.prose :where(h1, h2, h3, h4):not(:where([class~='not-prose'] *)) {
  @apply font-semibold tracking-tight text-slate-900 dark:text-white;
}

.prose :where(h1):not(:where([class~='not-prose'] *)) {
  @apply mb-8 text-4xl leading-tight sm:text-5xl;
}

.prose :where(h2):not(:where([class~='not-prose'] *)) {
  @apply relative mb-6 mt-14 pl-5 text-3xl leading-snug;
}

.prose :where(h2):not(:where([class~='not-prose'] *))::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 70%;
  width: 6px;
  border-radius: 9999px;
  background: linear-gradient(
    180deg,
    rgba(249, 115, 22, 0.8),
    rgba(249, 115, 22, 0.3)
  );
}

.prose :where(h3):not(:where([class~='not-prose'] *)) {
  @apply mb-4 mt-12 text-2xl text-slate-800 dark:text-slate-100;
}

.prose :where(h4):not(:where([class~='not-prose'] *)) {
  @apply mb-3 mt-10 text-xl text-slate-700 dark:text-slate-200;
}

.prose :where(blockquote):not(:where([class~='not-prose'] *)) {
  position: relative;
  /* margin: 2rem 0; */
  padding: 0.25rem 0 0.25rem 0.5rem;
  border-left: 10px solid #7c4405;
  background: transparent;
  color: #4a3006;
  font-weight: 600;
  line-height: 1.7;
  overflow: hidden;
}

:root.dark .prose :where(blockquote):not(:where([class~='not-prose'] *)) {
  /* border-left-color: #fbbf24; */
  color: #fef3c7;
}

.prose :where(blockquote):not(:where([class~='not-prose'] *))::before,
.prose :where(blockquote):not(:where([class~='not-prose'] *))::after {
  content: none;
}

.prose :where(blockquote p):not(:where([class~='not-prose'] *)) {
  margin: 0;
  color: inherit;
  text-align: left;
}

.prose
  :where(code):not(:where([class~='not-prose'] *)):not([class*='language-']) {
  @apply mr-0.5  bg-orange-100/60 pr-1.5 py-0.5 font-medium text-orange-700 dark:bg-orange-500/20 dark:text-orange-200;
}

.prose :where(a):not(:where([class~='not-prose'] *)) {
  @apply relative font-medium text-brand no-underline transition hover:text-orange-500;
}

.prose :where(a):not(:where([class~='not-prose'] *))::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 100%;
  height: 2px;
  border-radius: 999px;
  /* background: linear-gradient(
    90deg,
    rgba(249, 115, 22, 0.6),
    rgba(249, 115, 22, 0.2)
  ); */
  transform: scaleX(0.8);
  opacity: 0.6;
}

.prose :where(hr):not(:where([class~='not-prose'] *)) {
  @apply my-12 border-0;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(249, 115, 22, 0.35),
    transparent
  );
}

.prose :where(table):not(:where([class~='not-prose'] *)) {
  @apply my-8 w-full table-fixed overflow-hidden rounded-2xl border border-slate-200/70 text-sm shadow-sm dark:border-white/10;
  background: rgba(255, 255, 255, 0.75);
}

:root.dark .prose :where(table):not(:where([class~='not-prose'] *)) {
  background: rgba(15, 23, 42, 0.6);
}

.prose :where(th, td):not(:where([class~='not-prose'] *)) {
  @apply border-b border-slate-200/70 px-4 py-3 text-left align-top dark:border-white/10;
}

.prose :where(tr:last-child td):not(:where([class~='not-prose'] *)) {
  @apply border-b-0;
}

.prose :where(strong):not(:where([class~='not-prose'] *)) {
  @apply rounded-md bg-orange-100/80 px-1 py-0.5 font-semibold text-slate-900 dark:bg-orange-500/20 dark:text-white;
}

.prose :where(pre):not(:where([class~='not-prose'] *)) {
  @apply text-[0.95rem] leading-7;
}
/* Tailwind utilities */
@layer utilities {
  @keyframes hello {
    50% {
      transform: translateY(-25%) rotateZ(15deg);
    }
  }

  @keyframes breath {
    to {
      scale: 0.8;
    }
  }

  @keyframes fade-in {
    to {
      opacity: 1;
    }
  }

  @keyframes fade-out {
    to {
      opacity: 0;
    }
  }

  .animation-hello {
    animation: hello 3s infinite ease;
  }

  .animation-fade-in {
    animation: fade-in 0.5s ease forwards;
  }

  .animation-fade-out {
    animation: fade-out 0.5s ease forwards;
  }

  .animation-breath {
    animation: breath ease 2s alternate infinite;
  }
}

/* 主题切换动画增强 */
::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.5s;
  animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* 为用户偏好减少动画提供支持 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation: none !important;
  }
}
.navbar-wrapper {
  z-index: 999;
  background-image: radial-gradient(transparent 1px, rgb(var(--surface)) 1px);
  background-size: 4px 4px;
  backdrop-filter: saturate(50%) blur(4px);
}
.bio p {
  margin: 0;
  line-height: 1.5;
}
